---
title: vue3理解
date: 2021-09-02
categories:
- vue3
tags:
- 笔记
---

[vue3代码转换网站](https://vue-next-template-explorer.netlify.app/)
## vue3六大亮点
- Performance: 性能比vue2块1.2~2倍
- Tree shaking support: 按需编译，体积比vue2更小
- Composition API: 组合API(类似 React Hooks)
- Better TypeScript support：更好的TS支持
- Custom Renderer API：暴露了自定义渲染API
- Fragment,Teleport(Protal),Suspense: 更先进的组件

## Vue3是如何变快的？
- dff方法优化：
    + vue2中的虚拟dom是进行全量的对比
    + vue3新增了静态标记(PatchFlag)  
    在与上次的虚拟节点进行对比的时候，只对比待遇patch flag的节点，并且可以通过flag的信息得知当前节点要对比的具体内容
- hoistStatic 静态提升
    + vue2中无论元素是否参与更新，每次都会重新创建
    + vue3中对于不参与更新的元素，只会被创建一次，之后会在每次渲染时候被不停的复用
- cacheHandlers 事件监听器缓存
    + 默认情况下onClick会被视为动态绑定，所以每次都会去追踪它的变化，但是因为是同一个函数，所以没有追踪变化，直接换存起来复用即可
- ssr渲染
    + 当有大量静态的内容时候，这些内容会被当做纯字符串推进一个buffer里面，即使存在动态的绑定，会通过模板差值嵌入进去，这样会比通过虚拟dom来渲染的快上很多很多
    + 当静态内容大到一定量级时候，会用_createStaticVNode方法在客户端去生成一个static node，


